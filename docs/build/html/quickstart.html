

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Quickstart &mdash; pypdfplot 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. PyPDF File specification" href="specification.html" />
    <link rel="prev" title="2. Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pypdfplot
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Pypdfplot</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simple-example">3.1. Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#embedding-files">3.2. Embedding Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="specification.html">4. PyPDF File specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">5. Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">6. Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pypdfplot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>3. Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">pypdfplot</span></code> package is designed to seamlessly integrate with <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>.
In this section we will go through a basic example that shows how to use <code class="docutils literal notranslate"><span class="pre">pypdfplot</span></code>.</p>
<div class="section" id="simple-example">
<h2>3.1. Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this headline">¶</a></h2>
<p>For this example, our goal is to produce a red plot of the quadratic function from -10 to 20.
To start off, we will first plot this in the conventional way using <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>.</p>
<p>Create a new python file, let’s call it <code class="docutils literal notranslate"><span class="pre">example.py</span></code>.</p>
<p>Open the file and enter the following script:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>After running this script, we should get the following figure:</p>
<img alt="_images/plot.png" src="_images/plot.png" />
<p>Next, we will use <code class="docutils literal notranslate"><span class="pre">pypdfplot</span></code> to publish this plot as a PyPDF file.
In order to do this we need to make two changes to the script:</p>
<ol class="arabic simple">
<li>Instead of importing <em>matplotlib.pyplot</em> we have to import <em>pypdfplot</em>. Note that <code class="docutils literal notranslate"><span class="pre">pypdfplot</span></code> wraps all <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>’s functions, so by importing <em>pypdfplot</em> as <em>plt</em> like before, no other modifications to the code are needed.</li>
<li>Instead of calling <em>show()</em> we have to call <em>publish()</em>. Note that <em>publish()</em> can take all keywords that <em>show()</em> can, in addition to some new keywords (see XXX).</li>
</ol>
<p>The code now looks as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypdfplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
</pre></div>
</div>
<p>After running this script, if we look in the folder where our <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file once was, we notice it has been replaced by a new file <code class="docutils literal notranslate"><span class="pre">example.pdf</span></code>.
Of course the fact that the <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file disappeared doesn’t mean the script is gone – it is now embedded in the PyPDF file (<code class="docutils literal notranslate"><span class="pre">example.pdf</span></code>)!</p>
<p>We can find evidence of this by opening the <code class="docutils literal notranslate"><span class="pre">example.pdf</span></code> file:</p>
<img alt="_images/plot_pdf.png" src="_images/plot_pdf.png" />
<p>The table on the left shows all files that are embedded, and clearly <code class="docutils literal notranslate"><span class="pre">example.py</span></code> is there.</p>
<p>Most versions of Acrobat reader don’t allow the embedded .py file to be opened for security reasons, which is probably a good thing.
To access the python script, rename <code class="docutils literal notranslate"><span class="pre">example.pdf</span></code> into <code class="docutils literal notranslate"><span class="pre">example.py</span></code> and open the file.
This is what we should find:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#%PDF-1.3 23 0 obj &lt;&lt; /Type /EmbeddedFile /Length 124 &gt;&gt; stream</span>
<span class="kn">import</span> <span class="nn">pypdfplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">endstream</span>
<span class="sd">endobj</span>
<span class="sd">1 0 obj</span>

<span class="sd">&lt;...&gt;</span>

<span class="sd">startxref</span>
<span class="sd">8829</span>
<span class="sd">%%EOF</span>
<span class="sd">0000009410 00000</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The first line is the PDF header that helps the PDF reader to determine this is a valid PDF file.
It also includes the object header for the EmbeddedFile object of our <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file.
This line may not be altered, as it will result in coruption of the PyPDF file.</p>
<p>What follows is our original python script, followed by a massive multiline string.
This multiline string contains all the PDF objects including the data for any remaining embedded files (see XXX).
Making any edits in this string will again likely result in corruption of the file, so it is strongly discouraged as well.</p>
<p>In between the first line and the multiline string is our original python script, which may be edited in any way.
For example, let’s give the plot a title and change the color to blue:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#%PDF-1.3 23 0 obj &lt;&lt; /Type /EmbeddedFile /Length 124 &gt;&gt; stream</span>
<span class="kn">import</span> <span class="nn">pypdfplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Blue Example&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">endstream</span>
<span class="sd">endobj</span>
<span class="sd">1 0 obj</span>

<span class="sd">&lt;...&gt;</span>

<span class="sd">startxref</span>
<span class="sd">8829</span>
<span class="sd">%%EOF</span>
<span class="sd">0000009410 00000</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Again, after running the script the <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file is replaced by the <code class="docutils literal notranslate"><span class="pre">example.pdf</span></code> file.
When we open <code class="docutils literal notranslate"><span class="pre">example.pdf</span></code>, we should find the updated blue plot with caption:</p>
<img alt="_images/plot_pdf2.png" src="_images/plot_pdf2.png" />
</div>
<div class="section" id="embedding-files">
<h2>3.2. Embedding Files<a class="headerlink" href="#embedding-files" title="Permalink to this headline">¶</a></h2>
<p>In many cases we would like to plot data that is stored in a separate file.
In order for this to work, the external data file must be included in the PyPDF file as well.
What follows is an example how to embed external files with <code class="docutils literal notranslate"><span class="pre">pypdfplot</span></code>.</p>
<p>We will write a script that opens data from an external excel file and reads the title and axis label from an extrnal text file.</p>
<p>Create an excel file called <code class="docutils literal notranslate"><span class="pre">data.xlsx</span></code>.
For this example, we will fill the file with the first 10 numbers of the Fibonacci sequence:</p>
<img alt="_images/excel_data.png" src="_images/excel_data.png" />
<p>Then we create a text file with our title and axis labels called <code class="docutils literal notranslate"><span class="pre">title.txt</span></code>:</p>
<img alt="_images/notepad_title.png" src="_images/notepad_title.png" />
<p>Finally, we create a new python file called <code class="docutils literal notranslate"><span class="pre">packing.py</span></code>.</p>
<p>As before, let’s first have a look at how this script would look using <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>.
We will use <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> to import the Excel file into Python.
Open <code class="docutils literal notranslate"><span class="pre">packing.py</span></code> and enter the following script:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data.xlsx&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;r.&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;title.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>After running this script, the following figure should pop up:</p>
<img alt="_images/plot2.png" src="_images/plot2.png" />
<p>In order to use <code class="docutils literal notranslate"><span class="pre">pyplotpdf</span></code> to publish this as a PyPDF file, we change <em>matplotlib.pyplot</em> to <em>pypdfplot</em> and <em>show()</em> to <em>publish()</em> as before.</p>
<p>Additional files can be embedded in the PyPDF file by calling the function <em>pack(flist)</em>. The argument <em>flist</em> is a list of filenames that are to be embedded.</p>
<p>By calling <em>cleanup()</em> after the <em>publish()</em> function, the local files are deleted after they are successfully embedded in the PyPDF file.</p>
<p>The script now looks as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypdfplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data.xlsx&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;r.&#39;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;title.txt&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">pack</span><span class="p">([</span><span class="s1">&#39;data.xlsx&#39;</span><span class="p">,</span>
          <span class="s1">&#39;title.txt&#39;</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
<p>After running the script, the output file <code class="docutils literal notranslate"><span class="pre">packing.pdf</span></code> is generated and all three files <code class="docutils literal notranslate"><span class="pre">packing.py</span></code>, <code class="docutils literal notranslate"><span class="pre">data.xlsx</span></code>, and <code class="docutils literal notranslate"><span class="pre">title.txt</span></code> are deleted after being embedded in <code class="docutils literal notranslate"><span class="pre">packing.pdf</span></code>.
This can be confirmed by opening <code class="docutils literal notranslate"><span class="pre">packing.pdf</span></code>:</p>
<img alt="_images/plot_pdf3.png" src="_images/plot_pdf3.png" />
<p>To maximize integration with <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>, the PyPDF file is checked for embedded files at the time the <code class="docutils literal notranslate"><span class="pre">pypdfplot</span></code> package is imported. If embedded files are found, they are extracted provided there are no local files with the same filename. If a local file is found with the same filename, it is assumed this is a more recent version (e.g. a file that was extracted and then updated), and should therefore have precedence over the embedded file.</p>
<p>In case you want to keep the files that are extracted from the PyPDF file, simply comment out the <em>cleanup()</em> function.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="specification.html" class="btn btn-neutral float-right" title="4. PyPDF File specification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="2. Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Dirk van den Bekerom

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>